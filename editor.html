<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cì–¸ì–´ ì˜¨ë¼ì¸ ì»´íŒŒì¼ëŸ¬</title>
<link rel="stylesheet" href="styles.css">
<style>
  #output {
    background-color: #0d0d0d;
    border: 1px solid #3c3c3c;
    padding: 15px;
    border-radius: 4px;
    min-height: 150px;
    max-height: 400px;
    overflow-y: auto;
    font-size: 14px;
    line-height: 1.5;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .button-group {
    display: flex;
    gap: 10px;
    margin: 20px 0;
  }

  button {
    background-color: #0e639c;
    color: #ffffff;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  button:hover {
    background-color: #1177bb;
  }

  button:active {
    background-color: #0d5a8f;
  }

  button:disabled {
    background-color: #555555;
    cursor: not-allowed;
  }

  .status {
    margin-top: 10px;
    padding: 10px;
    border-radius: 4px;
    font-size: 14px;
    display: none;
  }

  .status.info {
    background-color: #1e3a5f;
    color: #4fc3f7;
    display: block;
  }

  .status.error {
    background-color: #5f1e1e;
    color: #ff6b6b;
    display: block;
  }

  .status.success {
    background-color: #1e5f1e;
    color: #6bff6b;
    display: block;
  }

  textarea {
    background-color: #1e1e1e;
    color: #d4d4d4;
    border: 1px solid #3c3c3c;
    padding: 10px;
    font-family: 'Consolas', 'Monaco', monospace;
    font-size: 14px;
    border-radius: 4px;
  }

  textarea:focus {
    outline: none;
    border-color: #4fc3f7;
  }

  h2, h3 {
    color: #4fc3f7;
    margin-top: 30px;
  }

  .info-box {
    background-color: #1e3a5f;
    border-left: 4px solid #4fc3f7;
    padding: 10px 15px;
    margin: 15px 0;
    border-radius: 4px;
    font-size: 13px;
    color: #b0b0b0;
  }

  .example-code {
    background-color: #0d0d0d;
    border: 1px solid #3c3c3c;
    padding: 10px;
    border-radius: 4px;
    margin: 10px 0;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .example-code:hover {
    border-color: #4fc3f7;
    background-color: #1a1a1a;
  }

  .examples {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
    margin: 15px 0;
  }
</style>
</head>
<body>
<header>ë¸Œë¼ìš°ì €ì—ì„œ C ì½”ë“œ ì‹¤í–‰</header>

<nav>
  <a href="index.html">ë©”ì¸</a>
  <a href="editor.html">ì‹¤ìŠµ</a>
</nav>

<div class="container">
  <h2>C ì½”ë“œ ì…ë ¥</h2>
  <div class="info-box">
    ğŸ’¡ C ì½”ë“œë¥¼ ì…ë ¥í•˜ê³  "â–¶ ì‹¤í–‰" ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </div>
  
  <textarea id="code" placeholder="C ì½”ë“œë¥¼ ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”...">#include <stdio.h>

int main() {
    printf("Hello from C!\n");
    return 0;
}</textarea>
  
  <div class="button-group">
    <button id="runBtn" onclick="runCode()">â–¶ ì‹¤í–‰</button>
    <button id="clearBtn" onclick="clearCode()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
  </div>

  <div id="status" class="status"></div>

  <h3>ì‹¤í–‰ ê²°ê³¼</h3>
  <pre id="output">ì‹¤í–‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.</pre>

  <h3>ğŸ“š ì˜ˆì œ ì½”ë“œ</h3>
  <div class="examples">
    <div class="example-code" onclick="loadExample(0)">
      <strong>Hello World</strong><br>
      ê°„ë‹¨í•œ ì¶œë ¥ ì˜ˆì œ
    </div>
    <div class="example-code" onclick="loadExample(1)">
      <strong>ë§ì…ˆ</strong><br>
      ë‘ ìˆ˜ì˜ í•© ê³„ì‚°
    </div>
    <div class="example-code" onclick="loadExample(2)">
      <strong>ë°˜ë³µë¬¸</strong><br>
      1ë¶€í„° 5ê¹Œì§€ ì¶œë ¥
    </div>
    <div class="example-code" onclick="loadExample(3)">
      <strong>ë°°ì—´</strong><br>
      ë°°ì—´ ìš”ì†Œ ì¶œë ¥
    </div>
  </div>
</div>

<script>
// ì˜ˆì œ ì½”ë“œ ëª¨ìŒ
const examples = [
  {
    name: "Hello World",
    code: `#include <stdio.h>

int main() {
    printf("Hello, World!\\n");
    return 0;
}`
  },
  {
    name: "ë§ì…ˆ",
    code: `#include <stdio.h>

int main() {
    int a = 10, b = 20;
    printf("a + b = %d\\n", a + b);
    return 0;
}`
  },
  {
    name: "ë°˜ë³µë¬¸",
    code: `#include <stdio.h>

int main() {
    for (int i = 1; i <= 5; i++) {
        printf("%d\\n", i);
    }
    return 0;
}`
  },
  {
    name: "ë°°ì—´",
    code: `#include <stdio.h>

int main() {
    int arr[] = {1, 2, 3, 4, 5};
    for (int i = 0; i < 5; i++) {
        printf("arr[%d] = %d\\n", i, arr[i]);
    }
    return 0;
}`
  }
];

// ì˜ˆì œ ì½”ë“œ ë¡œë“œ
function loadExample(index) {
  document.getElementById('code').value = examples[index].code;
  document.getElementById('output').textContent = 'ì˜ˆì œê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤í–‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.';
  document.getElementById('code').focus();
}

// ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
function showStatus(message, type = 'info') {
  const statusEl = document.getElementById('status');
  statusEl.textContent = message;
  statusEl.className = `status ${type}`;
  
  if (type === 'success' || type === 'error') {
    setTimeout(() => {
      statusEl.className = 'status';
    }, 3000);
  }
}

// JDoodle APIë¥¼ ì‚¬ìš©í•œ ì½”ë“œ ì‹¤í–‰ (CORS í”„ë¡ì‹œ ì‚¬ìš©)
async function runCode() {
  const code = document.getElementById('code').value;
  const output = document.getElementById('output');
  const runBtn = document.getElementById('runBtn');

  if (!code.trim()) {
    showStatus('âŒ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
    return;
  }

  runBtn.disabled = true;
  output.textContent = 'â³ ì½”ë“œ ì‹¤í–‰ ì¤‘...\n\n(ì„œë²„ì—ì„œ ì»´íŒŒì¼ ì¤‘ì…ë‹ˆë‹¤...)';
  showStatus('â³ ì½”ë“œë¥¼ ì„œë²„ì— ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'info');

  try {
    // JDoodle API ì‚¬ìš© (CORS í”„ë¡ì‹œë¥¼ í†µí•´)
    const jdoodleResponse = await fetch('https://api.jdoodle.com/v1/execute', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        'clientId': '2e3c5f6e3f8c8d8e8f8g8h8i8j8k8l8m',
        'clientSecret': '8f8c8d8e8f8g8h8i8j8k8l8m8n8o8p8q8r8s8t8u',
        'script': code,
        'language': 'c',
        'versionIndex': '0'
      })
    });

    if (!jdoodleResponse.ok) {
      throw new Error(`HTTP error! status: ${jdoodleResponse.status}`);
    }

    const result = await jdoodleResponse.json();

    if (result.error) {
      showStatus(`âŒ ì˜¤ë¥˜: ${result.error}`, 'error');
      output.textContent = `âŒ ì»´íŒŒì¼ ì˜¤ë¥˜:\n${result.error}`;
      return;
    }

    // ê²°ê³¼ ì¶œë ¥
    let resultText = '';

    if (result.output) {
      resultText = 'ğŸ“¤ í‘œì¤€ ì¶œë ¥:\n' + result.output;
    }

    if (result.statusCode !== 0) {
      if (resultText) resultText += '\n\n';
      resultText += `âš ï¸ ì‹¤í–‰ ìƒíƒœ ì½”ë“œ: ${result.statusCode}`;
    }

    if (!result.output && result.statusCode === 0) {
      resultText = 'âœ… ì½”ë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.\n(ì¶œë ¥ ì—†ìŒ)';
    }

    output.textContent = resultText || 'âœ… ì‹¤í–‰ ì™„ë£Œ';
    showStatus('âœ… ì½”ë“œ ì‹¤í–‰ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');

  } catch (error) {
    showStatus(`âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`, 'error');
    output.textContent = `âŒ ì˜¤ë¥˜ ë°œìƒ:\n${error.message}\n\níŒ: ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`;
  } finally {
    runBtn.disabled = false;
  }
}

// ì½”ë“œ ì´ˆê¸°í™” í•¨ìˆ˜
function clearCode() {
  if (confirm('ì½”ë“œë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    document.getElementById('code').value = '#include <stdio.h>\n\nint main() {\n    printf("Hello from C!\\n");\n    return 0;\n}';
    document.getElementById('output').textContent = 'ì‹¤í–‰ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.';
    document.getElementById('status').className = 'status';
  }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì½”ë“œ ì˜ì—­ì— í¬ì»¤ìŠ¤
window.addEventListener('load', () => {
  document.getElementById('code').focus();
});
</script>
</body>
</html>
