
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cì½”ë“œ ì…ë ¥ - JDoodle API ì‚¬ìš©</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .editor-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
      height: 600px;
    }

    .editor-section, .output-section {
      display: flex;
      flex-direction: column;
      background-color: #1e1e1e;
      border: 1px solid #3c3c3c;
      border-radius: 8px;
      overflow: hidden;
    }

    .section-title {
      background-color: #252526;
      padding: 10px 15px;
      color: #4fc3f7;
      font-weight: bold;
      border-bottom: 1px solid #3c3c3c;
    }

    textarea {
      flex: 1;
      padding: 15px;
      background-color: #1e1e1e;
      color: #d4d4d4;
      border: none;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      resize: none;
      outline: none;
    }

    textarea:focus {
      background-color: #252526;
    }

    .output-content {
      flex: 1;
      padding: 15px;
      color: #d4d4d4;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 14px;
      overflow-y: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .output-content.error {
      color: #ff6b6b;
    }

    .output-content.success {
      color: #6bff6b;
    }

    .button-group {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    button {
      padding: 12px 24px;
      background-color: #0e639c;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #1177bb;
    }

    button:active {
      background-color: #0d5a8f;
    }

    button:disabled {
      background-color: #555555;
      cursor: not-allowed;
    }

    .clear-btn {
      background-color: #555555;
    }

    .clear-btn:hover {
      background-color: #666666;
    }

    .loading {
      display: none;
      text-align: center;
      color: #4fc3f7;
      margin: 20px 0;
    }

    .spinner {
      border: 3px solid #3c3c3c;
      border-top: 3px solid #4fc3f7;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-right: 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .info-box {
      background-color: #1e3a5f;
      border-left: 4px solid #4fc3f7;
      padding: 12px;
      border-radius: 4px;
      margin: 20px 0;
      font-size: 13px;
      color: #b0b0b0;
    }

    .user-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding: 15px;
      background-color: #252526;
      border-radius: 4px;
    }

    .user-email {
      color: #4fc3f7;
    }

    .logout-btn {
      background-color: #c82333;
      padding: 8px 16px;
      font-size: 14px;
    }

    .logout-btn:hover {
      background-color: #a01d28;
    }

    @media (max-width: 768px) {
      .editor-container {
        grid-template-columns: 1fr;
        height: auto;
      }

      .editor-section, .output-section {
        height: 400px;
      }
    }
  </style>
</head>
<body>
<header>Cì–¸ì–´ ì˜¨ë¼ì¸ ì»´íŒŒì¼ëŸ¬</header>

<nav>
  <a href="index.html">ë©”ì¸</a>
  <a href="login.html">ë¡œê·¸ì¸</a>
</nav>

<div class="container">
  <div class="user-info">
    <span class="user-email" id="userEmail">ë¡œê·¸ì¸í•˜ì§€ ì•ŠìŒ</span>
    <button class="logout-btn" onclick="logout()" id="logoutBtn" style="display: none;">ë¡œê·¸ì•„ì›ƒ</button>
  </div>

  <div class="info-box">
    ğŸ’¡ JDoodle APIë¥¼ ì‚¬ìš©í•˜ì—¬ C ì½”ë“œë¥¼ ì»´íŒŒì¼í•©ë‹ˆë‹¤. ì½”ë“œë¥¼ ì…ë ¥í•˜ê³  "â–¶ ì‹¤í–‰" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
  </div>

  <div class="button-group">
    <button onclick="runCode()" id="runBtn">â–¶ ì‹¤í–‰</button>
    <button class="clear-btn" onclick="clearCode()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
  </div>

  <div class="loading" id="loading">
    <div class="spinner"></div>
    ì»´íŒŒì¼ ì¤‘...
  </div>

  <div class="editor-container">
    <div class="editor-section">
      <div class="section-title">ğŸ“ C ì½”ë“œ ì…ë ¥</div>
      <textarea id="codeEditor" placeholder="#include <stdio.h>

int main() {
    printf(&quot;Hello, World!\n&quot;);
    return 0;
}">#include <stdio.h>

int main() {
    printf("Hello, World!\n");
    return 0;
}</textarea>
    </div>

    <div class="output-section">
      <div class="section-title">ğŸ“¤ ì‹¤í–‰ ê²°ê³¼</div>
      <div class="output-content" id="output">ì—¬ê¸°ì— ì‹¤í–‰ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</div>
    </div>
  </div>

  <div class="info-box">
    <strong>ğŸ“Œ ì£¼ì˜ì‚¬í•­:</strong>
    <ul>
      <li>JDoodle APIë¥¼ ì‚¬ìš©í•˜ì—¬ C ì½”ë“œë¥¼ ì»´íŒŒì¼í•©ë‹ˆë‹¤.</li>
      <li>ì‹¤í–‰ ì‹œê°„ ì œí•œ: 30ì´ˆ</li>
      <li>íŒŒì¼ ì…ì¶œë ¥ì€ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
      <li>ë¬´í•œ ë£¨í”„ëŠ” ìë™ìœ¼ë¡œ ì¤‘ë‹¨ë©ë‹ˆë‹¤.</li>
    </ul>
  </div>

  <div class="info-box">
    <strong>ğŸ“ ì˜ˆì œ ì½”ë“œ:</strong>
    <pre style="background-color: #0d0d0d; padding: 10px; border-radius: 4px; overflow-x: auto;"><code>#include &lt;stdio.h&gt;

int main() {
    int a = 10, b = 20;
    printf("a + b = %d\n", a + b);
    return 0;
}</code></pre>
  </div>
</div>

<script>
// JDoodle API ì„¤ì •
const JDOODLE_API_URL = 'https://api.jdoodle.com/v1/execute';

// JDoodle ê³µê°œ í…ŒìŠ¤íŠ¸ í´ë¼ì´ì–¸íŠ¸ IDì™€ ì‹œí¬ë¦¿
// í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ìì‹ ì˜ í´ë¼ì´ì–¸íŠ¸ IDì™€ ì‹œí¬ë¦¿ì„ ì‚¬ìš©í•˜ì„¸ìš”
const JDOODLE_CLIENT_ID = 'c49ee66475faa64c22461c0b92e139'; // í…ŒìŠ¤íŠ¸ìš© ê³µê°œ ID
const JDOODLE_CLIENT_SECRET = '6d91f55dc3ec6804ad51a7c74083c1dc3a94193d8733e6a0e169b65453e27363'; // í…ŒìŠ¤íŠ¸ìš© ê³µê°œ ì‹œí¬ë¦¿

// í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
window.addEventListener('load', () => {
  const currentUser = localStorage.getItem('currentUser');
  if (currentUser) {
    document.getElementById('userEmail').textContent = currentUser;
    document.getElementById('logoutBtn').style.display = 'block';
  }
});

// C ì½”ë“œ ì‹¤í–‰ í•¨ìˆ˜
async function runCode() {
  const code = document.getElementById('codeEditor').value;
  const output = document.getElementById('output');
  const runBtn = document.getElementById('runBtn');
  const loading = document.getElementById('loading');

  if (!code.trim()) {
    output.textContent = 'âŒ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
    output.className = 'output-content error';
    return;
  }

  // UI ì—…ë°ì´íŠ¸
  runBtn.disabled = true;
  loading.style.display = 'block';
  output.textContent = '';
  output.className = 'output-content';

  try {
    // JDoodle API ìš”ì²­
    const response = await fetch(JDOODLE_API_URL, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        clientId: JDOODLE_CLIENT_ID,
        clientSecret: JDOODLE_CLIENT_SECRET,
        script: code,
        language: 'c',
        versionIndex: '5' // C ì–¸ì–´ (GCC)
      })
    });

    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }

    const result = await response.json();

    // ê²°ê³¼ í‘œì‹œ
    loading.style.display = 'none';
    runBtn.disabled = false;

    if (result.error && result.error.trim()) {
      // ì»´íŒŒì¼ ì˜¤ë¥˜
      output.textContent = `âŒ ì˜¤ë¥˜:\n${result.error}`;
      output.className = 'output-content error';
    } else if (result.output) {
      // ì„±ê³µì ì¸ ì‹¤í–‰
      output.textContent = result.output;
      output.className = 'output-content success';
    } else {
      // ì¶œë ¥ì´ ì—†ëŠ” ê²½ìš°
      output.textContent = 'âœ… ì½”ë“œê°€ ì„±ê³µì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.';
      output.className = 'output-content success';
    }

  } catch (error) {
    loading.style.display = 'none';
    runBtn.disabled = false;
    output.textContent = `âŒ ì˜¤ë¥˜: ${error.message}\n\níŒ: JDoodle APIì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”.`;
    output.className = 'output-content error';
    console.error('JDoodle API ì˜¤ë¥˜:', error);
  }
}

// ì½”ë“œ ì´ˆê¸°í™” í•¨ìˆ˜
function clearCode() {
  if (confirm('ì½”ë“œë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    document.getElementById('codeEditor').value = '#include <stdio.h>\n\nint main() {\n    printf("Hello, World!\\n");\n    return 0;\n}';
    document.getElementById('output').textContent = 'ì—¬ê¸°ì— ì‹¤í–‰ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.';
    document.getElementById('output').className = 'output-content';
  }
}

// ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
function logout() {
  localStorage.removeItem('currentUser');
  window.location.href = 'login.html';
}

// Enter í‚¤ë¡œ ì½”ë“œ ì‹¤í–‰ (Ctrl+Enter)
document.addEventListener('keydown', (e) => {
  if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
    runCode();
  }
});
</script>
</body>
</html>
